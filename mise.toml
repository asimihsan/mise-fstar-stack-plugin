[env]
MISE_USE_VERSIONS_HOST = "0"

[tools]
actionlint = "latest"
hk = "latest"
pkl = "latest"
stylua = "latest"

[tools."asdf:lua"]
version = "5.4"
os = ["linux", "macos"]

[tools.shellcheck]
version = "latest"
os = ["linux", "macos"]

[tasks.format]
description = "Format Lua scripts"
run = "stylua metadata.lua hooks/ lib/"

[tasks.lint]
description = "Lint Lua scripts and GitHub Actions using hk"
run = ["hk check --all", "shellcheck test/*.sh", "actionlint"]

[tasks.ci]
description = "Run all CI checks"
depends = ["lint", "test"]

[tasks.test]
description = "Run plugin tests - install and execute tool"
run = "bash mise-tasks/test"

[tasks.test-smoke]
description = "Smoke test plugin (full install)"
run = "bash mise-tasks/test-smoke"

[tasks.verify]
description = "Verify installed fstar-stack toolchain (version + proof)"
run = "bash mise-tasks/verify"
